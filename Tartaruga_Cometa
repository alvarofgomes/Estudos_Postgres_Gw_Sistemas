CREATE TABLE clientes ( 
 	id_cliente SERIAL PRIMARY KEY,  
 	nome VARCHAR(255) NOT NULL,  
 	cpf CHAR(11) UNIQUE,  
	cnpj CHAR(14) UNIQUE
); 

CREATE TABLE enderecos ( 
 	id_endereco SERIAL PRIMARY KEY,  
 	rua VARCHAR(100) NOT NULL,  
 	numero INT NOT NULL,  
 	bairro VARCHAR(100) NOT NULL,  
 	cidade VARCHAR(100) NOT NULL,  
 	estado VARCHAR(100) NOT NULL,  
 	cep CHAR(9) NOT NULL,  
 	clientes_id INTEGER REFERENCES clientes(id_cliente) ON DELETE CASCADE ON UPDATE CASCADE
); 

CREATE TABLE produtos ( 
 	id_produto SERIAL PRIMARY KEY,  
 	nome VARCHAR(255) NOT NULL,  
 	peso DECIMAL(10,2) NOT NULL,  
 	volume DECIMAL(10,2) NOT NULL,  
 	valorFrete DECIMAL(10,2) NOT NULL,  
); 

CREATE TABLE entregas ( 
 	id_entrega INT PRIMARY KEY,  
 	status ENUM('entregue','pendente','caminho') NOT NULL,  
 	frete DECIMAL(10,2) NOT NULL,  
); 

CREATE TABLE clientes_entregas(
	clientes_id INTEGER,
	entregas_id INTEGER,
	PRIMARY KEY(clientes_id,entregas_id),

	FOREIGN KEY(clientes_id)
	REFERENCES clientes(id_cliente),
	ON DELETE CASCADE
	ON UPDATE CASCADE,

	FOREIGN KEY(entregas_id)
	REFERENCES entregas(id_entrega)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);


ALTER TABLE endereco ADD FOREIGN KEY(id_cliente) REFERENCES cliente (id_cliente)
ALTER TABLE entrega ADD FOREIGN KEY(id_cliente) REFERENCES cliente (id_cliente)
ALTER TABLE item_entrega ADD FOREIGN KEY(id_entrega) REFERENCES entrega (id_entrega)
ALTER TABLE item_entrega ADD FOREIGN KEY(id_produto) REFERENCES produto (id_produto)
